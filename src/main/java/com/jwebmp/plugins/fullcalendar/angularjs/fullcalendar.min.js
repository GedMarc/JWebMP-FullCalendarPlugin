JW_APP_NAME.directive("fullcalendar",["$rootScope","$interval","$timeout",function($rootScope,$interval,$timeout){return{restrict:"A",scope:{options:"@options",externalEvents:"@externalEvents",eventSource:"@eventSource",resources:"@resources",dateClick:"&dateClick",eventClick:"&eventClick",eventReceive:"&eventReceive",eventResize:"&eventResize",eventDrop:"&eventDrop",select:"&select",unselect:"&unselect",navLinkDayClick:"&navLinkDayClick",navLinkWeekClick:"&navLinkWeekClick",websocketGroup:"@websocket"},controllerAs:"vm",controller:["$http","$rootScope","$scope",function($http,$rootScope,$scope){var vm=this;$scope.events=[];vm.extractInfoObject=function(infoObject){alert("extracting time calendar information");infoObject.view=undefined;infoObject.jsEvent=undefined;var copy=JSON.parse(JSON.stringify(infoObject));return copy};$scope.ctrlFn=function(element){var id=element.attr("id");if($scope.externalEvents!==undefined){$scope.containerEL=document.getElementById($scope.externalEvents)}$scope.calendarEL=document.getElementById(id);var options;if($scope.options!==undefined){options=JSON.parse($scope.options)}else{options={}}if($scope.resources!==undefined){options.resources=JSON.parse($scope.resources)}if($scope.eventSource!==undefined){if($("#"+id+":visible")){options.events=function(info,successCallback,failureCallback){$.get($scope.eventSource,function(data){$scope.events=data;successCallback($scope.events);return $scope.events})}}else{return $scope.events}}if($scope.dateClick!==undefined){$scope.options.dateClick=function(infoObject){info.dayEl.style.backgroundColor="red";$scope.$event=infoObject.event;var copy=vm.extractInfoObject(infoObject);$scope.eventData=copy;jwCntrl.perform($event,["headers"],$scope.dateClick,$scope.dateClick)}}if($scope.eventClick!==undefined){$scope.options.eventClick=$scope.eventClick}if($scope.eventReceive!==undefined){$scope.options.eventReceive=$scope.eventReceive}if($scope.eventResize!==undefined){$scope.options.eventResize=$scope.eventResize}if($scope.eventDrop!==undefined){$scope.options.eventDrop=$scope.eventDrop}if($scope.select!==undefined){$scope.options.select=$scope.select}if($scope.unselect!==undefined){$scope.options.unselect=$scope.unselect}if($scope.navLinkDayClick!==undefined){$scope.options.navLinkDayClick=$scope.navLinkDayClick}$scope.calendar=new FullCalendar.Calendar($scope.calendarEL,options);$scope.calendar.render()}}],link:function($scope,element,attrs){$scope.ctrlFn(element);element.on("$destroy",function(){$scope.calendar.destroy()})}}}]);